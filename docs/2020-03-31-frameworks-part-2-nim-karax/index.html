<!doctype html><html><head><title>Frameworks Comparison - Part 2 - Nim + Karax | The Toolshed</title><link rel="icon" href="/blog/img/logo.svg" /><meta charset="utf-8"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/languages/elm.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="/blog/mvp.css" rel="stylesheet" type="text/css"></head><body><header><h1>The Toolshed<img src="/blog/img/logo.svg" class="title-logo"></h1><small>Musings on web development tools</small></header><nav><a href="/blog/posts">Posts</a><a href="/blog/about">About</a><a href="/blog/projects">Projects</a><a href="/blog/contact">Contact</a></nav><main class="main-content"><h1>Frameworks Comparison - Part 2 - Nim + Karax</h1><div><span>2020-03-31</span><span> • </span><a href="/blog/tags/web">web</a><span> • </span><a href="/blog/tags/development">development</a></div><div class="markdown"><p>Next up in frameworks is <a href="https://github.com/pragmagic/karax">Karax</a> which is written in <a href="https://nim-lang.org/">Nim</a>. A small snippet of what Karax for those who are interested:</p>
<pre><code class="lang-nim">include karax / prelude

var lines: seq[kstring] = @[]

proc createDom(): VNode =
  result = buildHtml(tdiv):
    button:
      text "Say hello!"
      proc onclick(ev: Event; n: VNode) =
        lines.add "Hello simulated universe"
    for x in lines:
      tdiv:
        text x

setRenderer createDom
</code></pre>
<p>Now I’ve written some Nim before. I did the first couple <a href="https://adventofcode.com/">Advent of Code 2020</a> in Nim and I enjoyed it. Given that, I felt confident that I could get something working without too much trouble.</p>
<p>I was able to get my dev env setup pretty quickly and was building my little todo app. I soon ran into difficulties. The docs for Karax are still very young, so it was a lot of guesswork as to how things fit together. Nim’s error messages are usually helpful, but not enough for me to get a working todo app.</p>
<p>So I went the easy route and copy/pasted the example one from Karax’s repo with the goal to modify it. Sadly this didn’t last too long as I hit error after error, finally giving up when I got this error <code>Error: expression 'filter(maybeTodos, isSome)' cannot be called</code> when trying to load my saved todos from localStorage.</p>
<p>I also struggled with understanding how events work with Karax, which is what got me to skip to just copy/pasting their example in the first place. Nim’s error messages just weren’t helpful enough to get through the struggles either. I’ll probably skip Karax for now and leave Nim for non-JavaSCript projects.</p>
<h3 id="-updated-2020-04-01-">[Updated 2020-04-01]</h3>
<p>After publishing this post a friend contacted me and explained why I was getting that error, <code>Error: expression 'filter(maybeTodos, isSome)' cannot be called</code>. I had a variable <code>filter</code> defined up above from the copy/pasted code, so that one is one me. I figured it was only fair that I go back to the code and try a little harder, see if I can get a little further.</p>
<p>I did manage to get a lot more working. My todos are now stored locally as a sequence of <code>Todo</code> objects (similar to a struct or a record) instead of storing the todo content, completed status, and id as separate values in localStorage and querying localStorage every time.</p>
<p>I did eventually give up on finishing it as it felt like it was taking way too long to work with JS and Nim together. As I said originally, I’ll probably leave Nim for non-JavaScript projects.</p>
</div></main><footer><a href="https://github.com/wolfadex">GitHub</a><a href="https://twitter.com/wolfadex">Twitter</a><a href="https://www.linkedin.com/in/twolfgangschuster/">LinkedIn</a><a href="https://www.npmjs.com/package/elmstatic">Created with Elmstatic</a></footer><link href="/blog/styles.css" rel="stylesheet" type="text/css"></body></html>
